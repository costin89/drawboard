<!DOCTYPE html>
<html>
<head>
  <title>Canvas Drawing</title>
</head>
<body>
  <canvas id="myCanvas"></canvas>
  <button id="clearButton">Clear</button>
  <button id="saveButton">Save</button>
  <button id="openButton">Open</button>

  <script>
    const canvas = document.getElementById("myCanvas");
    const ctx = canvas.getContext("2d");
    const clearButton = document.getElementById("clearButton");
    const saveButton = document.getElementById("saveButton");
    const openButton = document.getElementById("openButton");

    let isDrawing = false;
    let x = 0;
    let y = 0;

    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    clearButton.addEventListener("click", () => ctx.clearRect(0, 0, canvas.width, canvas.height));
    saveButton.addEventListener("click", saveCanvas);
    openButton.addEventListener("click", openCanvas);

    canvas.addEventListener("mousedown", e => {
      x = e.clientX;
      y = e.clientY;
      isDrawing = true;
    });

    canvas.addEventListener("mousemove", e => {
      if (!isDrawing) return;
      draw(x, y, e.clientX, e.clientY);
      x = e.clientX;
      y = e.clientY;
    });

    canvas.addEventListener("mouseup", () => (isDrawing = false));
    canvas.addEventListener("mouseout", () => (isDrawing = false));

    ctx.strokeStyle = "blue";
    ctx.lineWidth = 1;

    function draw(x1, y1, x2, y2) {
      ctx.beginPath();
      ctx.moveTo(x1, y1);
      ctx.lineTo(x2, y2);
      ctx.stroke();
    }

    function saveCanvas() {
      const data = canvas.toDataURL();
      localStorage.setItem("savedCanvas", data);
    }

    function openCanvas() {
      const data = localStorage.getItem("savedCanvas");
      const image = new Image();
      image.src = data;
      image.onload = () => {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.drawImage(image, 0, 0);
      };
    }
  </script>
</body>
</html>